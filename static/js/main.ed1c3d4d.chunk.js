(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{173:function(e,t,a){},176:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(65),i=a.n(r),c=(a(71),a(14)),o=a.n(c),u=a(41),m=a(25),s=a(26),d=a(28),g=a(27),h=a(2),E=a(29),p=(a(73),a(74),a(30)),f=(a(173),function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.loginFunction,a=e.logoutFunction,n=e.isSignedIn;return l.a.createElement("div",{className:"header_wrapper"},l.a.createElement("div",{className:"title"},"SinarJaya"),!n&&l.a.createElement("button",{onClick:t,className:"login_btn"},"Login"),n&&l.a.createElement("button",{onClick:a,className:"logout_btn"},"Logout"))}}]),t}(l.a.Component)),b=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(d.a)(this,Object(g.a)(t).call(this))).state={isDataReady:!1,itemEditIndex:null,agentEditIndex:null},e.formValueItem={},e.formValueAgent={},e.editItemValue={},e.editAgentValue={},e.agentIndex={},e.result={item:[],agent:[]},e.loginFunction=e.loginFunction.bind(Object(h.a)(e)),e.logoutFunction=e.logoutFunction.bind(Object(h.a)(e)),e.formChangeItem=e.formChangeItem.bind(Object(h.a)(e)),e.formChangeAgent=e.formChangeAgent.bind(Object(h.a)(e)),e.pushItem=e.pushItem.bind(Object(h.a)(e)),e.pushAgent=e.pushAgent.bind(Object(h.a)(e)),e.saveEdit=e.saveEdit.bind(Object(h.a)(e)),e.itemContentChange=e.itemContentChange.bind(Object(h.a)(e)),e.agentContentChange=e.agentContentChange.bind(Object(h.a)(e)),e.deleteItem=e.deleteItem.bind(Object(h.a)(e)),e}return Object(E.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.firebase,a=t.database().ref().child("item"),n=t.database().ref().child("agent");a.once("value").then(function(t){t.forEach(function(a){if("default"!==a.key){var n=t.child(a.key).val();n.id=a.key,e.result.item.push(n)}})}),n.once("value").then(function(t){var a=0;t.forEach(function(n){if("default"!==n.key){var l=t.child(n.key).val();l.id=n.key,e.result.agent.push(l),e.agentIndex[n.key]=a,a++}}),e.setState({isDataReady:!0})})}},{key:"loginFunction",value:function(){var e=this.props.firebase,t=new e.auth.GoogleAuthProvider;t.addScope("https://www.googleapis.com/auth/plus.login"),e.auth().signInWithPopup(t).then(function(e){console.warn(e)}).catch(function(e){console.error(e)})}},{key:"logoutFunction",value:function(){this.props.firebase.auth().signOut()}},{key:"formChangeItem",value:function(e){this.formValueItem[e.target.name]=e.target.value}},{key:"formChangeAgent",value:function(e){this.formValueAgent[e.target.name]=e.target.value}},{key:"pushItem",value:function(){var e=Object(u.a)(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.formValueItem.agent){e.next=4;break}alert("Please fill Agent on Insert Item section"),e.next=7;break;case 4:return e.next=6,t(this.formValueItem);case 6:window.location.reload();case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"pushAgent",value:function(){var e=Object(u.a)(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(this.formValueAgent);case 2:window.location.reload();case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteItem",value:function(e){this.props.firebase.database().ref("item").child(e.target.dataset.id).remove(),window.location.reload()}},{key:"saveEdit",value:function(e,t){var a,n,l=this.props.firebase;if("item"===t?(a=0!==Object.keys(this.editItemValue).length,n=this.editItemValue):(a=0!==Object.keys(this.editAgentValue).length,n=this.editAgentValue),a){var r=l.database().ref(t);r.child(e.target.dataset.id).update(n).then(function(){r.once("value")}).then(function(e){return e.val()}).catch(function(e){}),window.location.reload()}this.editItemValue={},this.setState({itemEditIndex:null,agentEditIndex:null})}},{key:"itemContentChange",value:function(e){"agent"===e.target.dataset.name?this.editItemValue[e.target.dataset.name]=e.target.value:this.editItemValue[e.target.dataset.name]=e.target.innerHTML}},{key:"agentContentChange",value:function(e){this.editAgentValue[e.target.dataset.name]=e.target.innerHTML}},{key:"renderDataColumn",value:function(e,t,a,n){return t.map(function(t){return l.a.createElement("td",{key:t+e.id,className:n?"edit_active":null,contentEditable:n,suppressContentEditableWarning:!0,onInput:n?a:null,"data-name":t},e[t])})}},{key:"render",value:function(){var e=this,t=this.props,a=t.firebase,n=t.config,r=t.isSignedIn,i=this.state,c=i.isDataReady,o=i.itemEditIndex,u=i.agentEditIndex,m=this.result,s=m.item,d=m.agent,g=this.agentIndex;return c?l.a.createElement(l.a.Fragment,null,l.a.createElement(f,{loginFunction:this.loginFunction,logoutFunction:this.logoutFunction,isSignedIn:r}),l.a.createElement("div",{className:"item_wrapper"},l.a.createElement("div",{className:"item_title"},"Item Detail"),l.a.createElement("table",{width:"100%"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Agent Detail"),l.a.createElement("td",null,"Item Name"),l.a.createElement("td",null,"Buy Price"),l.a.createElement("td",null,"Sell Price"),l.a.createElement("td",null,"Action"))),l.a.createElement("tbody",null,s.map(function(t,a){var n=o===a;return l.a.createElement("tr",{key:t.id},l.a.createElement("td",{className:n?"edit_active":null},!n&&l.a.createElement("table",{width:"100%",className:"agent_detail_table"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Agent Name"),l.a.createElement("td",null,d[g[t.agent]].name)),l.a.createElement("tr",null,l.a.createElement("td",null,"Agent Phone"),l.a.createElement("td",null,d[g[t.agent]].telephone)),l.a.createElement("tr",null,l.a.createElement("td",null,"Agent Address"),l.a.createElement("td",null,d[g[t.agent]].address)))),n&&l.a.createElement("select",{onChange:e.itemContentChange,"data-name":"agent",defaultValue:t.agent},d.map(function(e){return l.a.createElement("option",{key:e.id,value:e.id},e.name)}))),e.renderDataColumn(t,["name","price","sellPrice"],e.itemContentChange,n),l.a.createElement("td",{className:"action_column"},!n&&null===o&&l.a.createElement("span",{className:"edit_icon",title:"Edit",onClick:function(){e.setState({itemEditIndex:a})}}),n&&l.a.createElement("span",{"data-id":t.id,className:"save_icon",title:"Save",onClick:function(t){return e.saveEdit(t,"item")}}),l.a.createElement("span",{className:"delete_icon",title:"Delete","data-id":t.id,onClick:function(t){return e.deleteItem(t,"item")}})))})))),l.a.createElement("div",{className:"agent_wrapper"},l.a.createElement("div",{className:"agent_title"},"Agent Detail"),l.a.createElement("table",{width:"100%"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Agent Name"),l.a.createElement("td",null,"Agent Phone"),l.a.createElement("td",null,"Agent Address"),l.a.createElement("td",null,"Action"))),l.a.createElement("tbody",null,d.map(function(t,a){var n=u===a;return l.a.createElement("tr",{key:t.id},e.renderDataColumn(t,["name","telephone","address"],e.agentContentChange,n),l.a.createElement("td",{className:"action_column"},!n&&null===u&&l.a.createElement("span",{className:"edit_icon",title:"Edit",onClick:function(){e.setState({agentEditIndex:a})}}),n&&l.a.createElement("span",{"data-id":t.id,className:"save_icon",title:"Save",onClick:function(t){return e.saveEdit(t,"agent")}}),l.a.createElement("span",{className:"delete_icon",title:"Delete","data-id":t.id,onClick:function(t){return e.deleteItem(t,"agent")}})))})))),l.a.createElement(p.b,Object.assign({firebase:a},n),l.a.createElement(p.a,{type:"push",path:"item"},function(t){var a=t.runMutation;return l.a.createElement("table",{className:"form_table"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"2",className:"item_title"},"Insert Item")),l.a.createElement("tr",null,l.a.createElement("td",null,"Agent"),l.a.createElement("td",null,l.a.createElement("select",{onChange:e.formChangeItem,name:"agent"},l.a.createElement("option",{defaultValue:!0},"- select from list -"),d.map(function(e){return l.a.createElement("option",{key:e.id,value:e.id},e.name)})))),l.a.createElement("tr",null,l.a.createElement("td",null,"Item Name"),l.a.createElement("td",null,l.a.createElement("input",{type:"text",name:"name",placeholder:"name",onChange:e.formChangeItem}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Buy Price"),l.a.createElement("td",null,l.a.createElement("input",{type:"text",name:"price",placeholder:"price",onChange:e.formChangeItem}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Sell Price"),l.a.createElement("td",null,l.a.createElement("input",{type:"text",name:"sellPrice",placeholder:"sellPrice",onChange:e.formChangeItem}))),l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"2"},l.a.createElement("button",{onClick:function(){return e.pushItem(a)}},"Insert Data")))))}),l.a.createElement(p.a,{type:"push",path:"agent"},function(t){var a=t.runMutation;return l.a.createElement("table",{className:"form_table"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"2",className:"agent_title"},"Insert Agent")),l.a.createElement("tr",null,l.a.createElement("td",null,"Agent Adress"),l.a.createElement("td",null,l.a.createElement("input",{type:"text",name:"address",placeholder:"address",onChange:e.formChangeAgent}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Agent Name"),l.a.createElement("td",null,l.a.createElement("input",{type:"text",name:"name",placeholder:"name",onChange:e.formChangeAgent}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Agent Phone"),l.a.createElement("td",null,l.a.createElement("input",{type:"text",name:"telephone",placeholder:"telephone",onChange:e.formChangeAgent}))),l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"2"},l.a.createElement("button",{onClick:function(){return e.pushAgent(a)}},"Insert Data")))))}))):l.a.createElement("div",{className:"loading"},"Loading...")}}]),t}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var v=a(43),I=a.n(v),y=(a(174),a(44)),C={apiKey:"AIzaSyBqHd8T1PZ5vI0_z0QMz2SUjGp0zJgH2xM",authDomain:"sinarjaya-eeda5.firebaseapp.com",databaseURL:"https://sinarjaya-eeda5.firebaseio.com",projectId:"sinarjaya-eeda5",storageBucket:"sinarjaya-eeda5.appspot.com",messagingSenderId:"354759237488",appId:"1:354759237488:web:da0c1bd331a79be6"},k=l.a.createElement(l.a.Fragment,null,l.a.createElement(y.b,Object.assign({firebase:I.a},C),l.a.createElement(y.a,null,function(e){var t=e.isSignedIn;e.user,e.providerId;return l.a.createElement(b,{isSignedIn:t,firebase:I.a,config:C})})));i.a.render(k,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},66:function(e,t,a){e.exports=a(176)},71:function(e,t,a){},73:function(e,t,a){}},[[66,1,2]]]);
//# sourceMappingURL=main.ed1c3d4d.chunk.js.map